<!DOCTYPE html>
<html>
  <!-- Tests embedding SVG using an OBJECT tag, and manipulating it through
       JavaScript -->

 <head>

<meta charset="utf-8">
<script src="./iconfont.js"></script>
<script src="./transform.js"></script>  
<script src="./fxxk.js"></script>  
<script src="./alloy_finger.js"></script>  
<script src="./alloy_touch.js"></script>

<script src="./alloy_touch.select.multiple.js"></script>
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,user-scalable=no">
<link rel="stylesheet" type="text/css" href="index.css">
<style>
.header{
position:fixed;
overflow: hidden;
box-sizing:border-box;
width:100%;
height:36px;
background-color:#42a5f4;
top:0px;
left:0px;
z-index:999;
}
.svg1{
width:3000px;overflow:hidden;-webkit-overflow-scrolling: touch;position:absolute;z-index: 998;
}
.search{
width:276px;
border:0;
padding-left:88px;
padding-bottom:0;
padding-top:0;
position: absolute;
top:50%;
transform: translateY(-50%);
overflow: hidden;
}
input{
border-width: 0;
height:24px;
line-height: 24px;
font-size: 14px;
width: 100%;
border-radius: 3px;
padding-left: 28px;
color: rgba(255,255,255,0.7);
background-color: #0077c1;
} 
::-webkit-input-placeholder {
	color: rgba(255,255,255,0.7);
}
.icon {
position: absolute;
top:50%;
transform: translateY(-50%);
overflow: hidden;
fill:rgba(0,0,0,0.7);
z-index:999;
}
.isearch{
width:14px;
height:14px;
left:95px;
fill: rgba(255,255,255,0.7);
}
.iplus{
width:20px;
height:20px;
right:16px;
}
.arrowleft{
width:20px;
height:20px;
left:16px;	
}
.arrowright{
width:20px;
height:20px;
left:52px;	
}

</style>
</head>
<body> 

<div class="header">
<svg class="icon arrowleft" aria-hidden="true">
  <use xlink:href="#icon-arrowleft"></use>
</svg>
<svg class="icon arrowright" aria-hidden="true">
  <use xlink:href="#icon-arrowright"></use>
</svg>
<svg class="icon isearch" aria-hidden="true">
  <use xlink:href="#icon-search"></use>
</svg>
<form class="search " action="">
<input  type="search" name="search"    placeholder="search"/>
</form>
<svg class="icon iplus" aria-hidden="true">
  <use xlink:href="#icon-plus"></use>
</svg>
</div>
   <div id="svgDiv">     
   </div>
        <div id="selectCtn"></div>

    <script>
 var at = new AlloyTouch.MultipleSelect({
        options: [
            {name: 'T011保护屏', list: [
                {num:'D1211-03',name: '屏面布置图'}, 
                {num:'D1211-04',name: '公用回路图'}, 
                {num:'D1211-05',name: '电流电压回路图'},  
                {num:'D1211-06',name: '输入回路图'}, 
                {num:'D1211-07',name: '输出回路图'}, 
                {num:'D1211-08',name: '信号回路图'}, 
                {num:'D1211-09',name: '操作箱接线图一'},
                {num:'D1211-10',name: '操作箱接线图二'}, 
                {num:'D1211-11',name: '操作箱接线图三'},
                {num:'D1211-12',name: '操作箱接线图四'},
                {num:'D1211-13',name: '操作箱接线图五'},
                {num:'D1211-14',name: '端子排图'}
            ]}, 
             {name: 'T012保护屏', list: [
                {num:'D1211-15',name: '屏面布置图'}, 
                {num:'D1211-16',name: '公用回路图'}, 
                {num:'D1211-17',name: '电流电压回路图'},  
                {num:'D1211-18',name: '输入回路图'}, 
                {num:'D1211-19',name: '输出回路图'}, 
                {num:'D1211-20',name: '信号回路图'}, 
                {num:'D1211-21',name: '操作箱接线图一'},
                {num:'D1211-22',name: '操作箱接线图二'}, 
                {num:'D1211-23',name: '操作箱接线图三'},
                {num:'D1211-24',name: '操作箱接线图四'},
                {num:'D1211-25',name: '操作箱接线图五'},
                {num:'D1211-26',name: '端子排图'}
            ]},
                {name: 'T013保护屏', list: [
                {num:'D1211-27',name: '屏面布置图'}, 
                {num:'D1211-28',name: '公用回路图'}, 
                {num:'D1211-29',name: '电流电压回路图'},  
                {num:'D1211-30',name: '输入回路图'}, 
                {num:'D1211-31',name: '输出回路图'}, 
                {num:'D1211-32',name: '信号回路图'}, 
                {num:'D1211-33',name: '操作箱接线图一'},
                {num:'D1211-34',name: '操作箱接线图二'}, 
                {num:'D1211-35',name: '操作箱接线图三'},
                {num:'D1211-36',name: '操作箱接线图四'},
                {num:'D1211-37',name: '操作箱接线图五'},
                {num:'D1211-38',name: '端子排图'}
            ]},
	            {name: '固乐二线保护屏I', list: [
	                {num:'D1211-39',name: '屏面布置图'}, 
	                {num:'D1211-40',name: '公用回路图'}, 
	                {num:'D1211-41',name: '电流电压回路图'},  
	                {num:'D1211-42',name: '输入回路图'}, 
	                {num:'D1211-43',name: '输出回路图'}, 
	                {num:'D1211-44',name: '信号回路图'}, 
	                {num:'D1211-45',name: '通道接口示意图'},
	                {num:'D1211-46',name: '端子排图'}, 
	            ]}, 
	            {name: '固乐二线保护屏II', list: [
	                {num:'D1211-47',name: '屏面布置图'}, 
	                {num:'D1211-48',name: '公用回路图'}, 
	                {num:'D1211-49',name: '电流电压回路图'},  
	                {num:'D1211-50',name: '输入回路图'}, 
	                {num:'D1211-51',name: '输出回路图'}, 
	                {num:'D1211-52',name: '信号回路图'}, 
	                {num:'D1211-53',name: '通道接口示意图'},
	                {num:'D1211-54',name: '端子排图'}, 
	            ]},
       ],
        level: 2,
        renderTo: "#selectCtn",
        selectedIndex: [1, 2],
        change: function (selectedIndex, text1, text2) {
         
        },
        complete: function (selectedIndex, text1, text2) {
           var numList = at.options[selectedIndex[0]].list;
           foo(numList[selectedIndex[1]].num);
           console.log(text1 + '-' + text2);
           console.log(this.nowSelected)
        }


    })
    var f = spaceX['D1211-05'];
      document.addEventListener("touchmove", function (evt) {
            evt.preventDefault();
        }, false);
    function objLoadFunc() {
    var doc = document.getElementById(f);  



     var el = doc.contentDocument.children[0];
        Transform(el);
        var initScale = 1;
        var gesture = new AlloyFinger(el, {
            // rotate: function (evt) {
            //     el.rotateZ += evt.angle;
            // },
            // pinchStart: function () {
            //     initScale = el.scaleX;
            // },
            // pinch: function (evt) {
            //     el.scaleX = el.scaleY = initScale * evt.scale;
            // },
            pressMove: function (evt) {
                el.translateX += evt.deltaX;
                el.translateY += evt.deltaY;
                evt.preventDefault();
            
            },
            tap: function (evt) {
                //console.log(el.scaleX + "_" + el.scaleY + "_" + el.rotateZ + "_" + el.translateX + "_" + el.translateY);
                //console.log("tap");
                //     el.translateX = 400;
                // el.translateY = 400;
                evt.preventDefault();
                var evt= evt.target;
                var evtX = evt.textContent;
                if(/D[0-9]{4}-[0-9]{2}/.test(evtX)) 
   					{
   					 foo(evtX);
   					}
                 
            },
            doubleTap: function (evt) {
                //console.log("doubleTap");
                  evt.preventDefault();
            },
            longTap: function (evt) {
                //console.log("longTap");  evt.preventDefault();
                  evt.preventDefault();
            },
            swipe: function (evt) {
                //console.log("swipe" + evt.direction);
                  evt.preventDefault();
            }
            
        });


    // doc.contentDocument.addEventListener('click',function(e){},false);
}
		function foo(evtX){
			var doc = document.getElementById(f); 

            if(spaceX[evtX]){
            doc.parentNode.removeChild(doc);
            f = spaceX[evtX];
   			loadFunc();
   		    }
   			
		}
     function loadFunc() {  
       var obj = document.createElement('object');
		   obj.id = f;
		   obj.setAttribute('type', 'image/svg+xml');
		   obj.setAttribute('data', f);
		   obj.setAttribute('class', 'svg1');
		   obj.addEventListener('load', objLoadFunc, false);
		   var container = document.getElementById('svgDiv');
		   container.appendChild(obj);
		      
		 }  
     window.addEventListener('load', loadFunc, false);  
     if ('serviceWorker' in navigator) {  
  navigator.serviceWorker.register('sw.js').then(function(registration) {  
    console.log('ServiceWorker registration successful with scope: ',    registration.scope);  
  }).catch(function(err) {  
    console.log('ServiceWorker registration failed: ', err);  
  });  
}    

    </script>
<script src="./q.js"></script>
 </body>
</html>
